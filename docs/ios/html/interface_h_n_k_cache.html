<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>UNICORN - iOS: HNKCache クラス</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UNICORN - iOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>総合概要</span></a></li>
      <li><a href="pages.html"><span>諸情報</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>クラス一覧</span></a></li>
      <li><a href="classes.html"><span>クラス索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>クラスメンバ</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="class_h_n_k_cache-members.html">全メンバ一覧</a>  </div>
  <div class="headertitle">
<div class="title">HNKCache クラス</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
HNKCache の継承関係図</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_h_n_k_cache.png" usemap="#HNKCache_map" alt=""/>
  <map id="HNKCache_map" name="HNKCache_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
実体メソッド</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Getting images</div></td></tr>
<tr><td colspan="2"><div class="groupText"><hr/>
 <hr/>
 </div></td></tr>
<tr class="memitem:a0d0567e2654dae805279b55432226a35"><td class="memItemLeft" align="right" valign="top">(UIImage *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a0d0567e2654dae805279b55432226a35">imageForEntity:formatName:error:</a></td></tr>
<tr class="separator:a0d0567e2654dae805279b55432226a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ffc1b5bcc88ae33e9a914a17b2eaf0"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a05ffc1b5bcc88ae33e9a914a17b2eaf0">retrieveImageForEntity:formatName:completionBlock:</a></td></tr>
<tr class="separator:a05ffc1b5bcc88ae33e9a914a17b2eaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3f87e9d4189c0ec91b634b8f581296"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a9b3f87e9d4189c0ec91b634b8f581296">retrieveImageForKey:formatName:completionBlock:</a></td></tr>
<tr class="separator:a9b3f87e9d4189c0ec91b634b8f581296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Setting images</div></td></tr>
<tr><td colspan="2"><div class="groupText"><hr/>
 <hr/>
 </div></td></tr>
<tr class="memitem:acf8eec52df76d3baddbb5db9d14ea130"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#acf8eec52df76d3baddbb5db9d14ea130">setImage:forKey:formatName:</a></td></tr>
<tr class="separator:acf8eec52df76d3baddbb5db9d14ea130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Removing images</div></td></tr>
<tr><td colspan="2"><div class="groupText"><hr/>
 <hr/>
 </div></td></tr>
<tr class="memitem:a6a2363137e2e666f0c2b0b6b6f1b7878"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a6a2363137e2e666f0c2b0b6b6f1b7878">removeAllImages</a></td></tr>
<tr class="separator:a6a2363137e2e666f0c2b0b6b6f1b7878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cefa5aa5dc717a6e6c7a4e92dad22f1"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a7cefa5aa5dc717a6e6c7a4e92dad22f1">removeImagesOfFormatNamed:</a></td></tr>
<tr class="separator:a7cefa5aa5dc717a6e6c7a4e92dad22f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a883d1792fdc2fb05da72afbef8fdd350"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a883d1792fdc2fb05da72afbef8fdd350">removeImagesOfEntity:</a></td></tr>
<tr class="separator:a883d1792fdc2fb05da72afbef8fdd350"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Initializing the cache</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpb7f85940c1a734cf9695eec43d94a3d8"></a></p><hr/>
 <hr/>
 </td></tr>
<tr class="memitem:a26177b583cb0fbc469732f304304ae63"><td class="memItemLeft" align="right" valign="top">NSDictionary *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_h_n_k_cache.html#a26177b583cb0fbc469732f304304ae63">formats</a></td></tr>
<tr class="separator:a26177b583cb0fbc469732f304304ae63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85cec51236a6c4167c98e6c18a004177"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a85cec51236a6c4167c98e6c18a004177">initWithName:</a></td></tr>
<tr class="separator:a85cec51236a6c4167c98e6c18a004177"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4e4bf27410dfebf218602b549e0da9"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_h_n_k_cache.html#a8b4e4bf27410dfebf218602b549e0da9">registerFormat:</a></td></tr>
<tr class="separator:a8b4e4bf27410dfebf218602b549e0da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751b4c06b72430a498db248c201c4451"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_h_n_k_cache.html">HNKCache</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_h_n_k_cache.html#a751b4c06b72430a498db248c201c4451">sharedCache</a></td></tr>
<tr class="separator:a751b4c06b72430a498db248c201c4451"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">メソッド詳解</h2>
<a class="anchor" id="a0d0567e2654dae805279b55432226a35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (UIImage *) imageForEntity: </td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_h_n_k_cache_entity-p.html">HNKCacheEntity</a>&gt;)&#160;</td>
          <td class="paramname"><em>entity</em></td>
        </tr>
        <tr>
          <td class="paramkey">formatName:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>formatName</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError*__autoreleasing *)&#160;</td>
          <td class="paramname"><em>errorPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Synchronously retrieves the image for the given entity conforming to the given format from memory or disk cache, or creates it if it doesn't exist. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity</td><td>Entity that represents the original image. If an image for the given entity and format doesn't exist in the cache, the entity will be asked to provide the original data or image to create it. </td></tr>
    <tr><td class="paramname">formatName</td><td>Name of the format in which the image is desired. The format must have been previously registered with the cache. If an image for the given key and format doesn't exist in the cache, it will be created based on the format. If by creating the image the format disk capacity is surpassed, least recently used images of the format will be removed until it isn't. </td></tr>
    <tr><td class="paramname">errorPtr</td><td>If an error occurs, upon return contains an NSError object that describes the problem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>An image for the given entity conforming to the given format, or nil if an error ocurred.  The image will be returned synchronously but the disk cache will be updated in background. </dd></dl>

</div>
</div>
<a class="anchor" id="a85cec51236a6c4167c98e6c18a004177"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithName: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>name</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a cache with the given name. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the cache. Used as the name of the subdirectory for the disk cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8b4e4bf27410dfebf218602b549e0da9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) registerFormat: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_h_n_k_cache_format.html">HNKCacheFormat</a>*)&#160;</td>
          <td class="paramname"><em>format</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers a format in the cache. Haneke will automatically update the diskSize of the format as images are added. If a format with the same name already exists in the cache, it will be cleared first. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">Format</td><td>to be registered in the cache.  If the format preload policy allows it, Haneke will add some or all images cached on disk to the memory cache. If an image of the given format is requested, Haneke will cancel preloading to give priority to the request.  A format can only be registered in one cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6a2363137e2e666f0c2b0b6b6f1b7878"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeAllImages </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all cached images. </p>

</div>
</div>
<a class="anchor" id="a883d1792fdc2fb05da72afbef8fdd350"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeImagesOfEntity: </td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_h_n_k_cache_entity-p.html">HNKCacheEntity</a>&gt;)&#160;</td>
          <td class="paramname"><em>entity</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all cached images of the given entity. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity</td><td>Entity whose images will be removed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7cefa5aa5dc717a6e6c7a4e92dad22f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeImagesOfFormatNamed: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>formatName</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all cached images of the given format. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">formatName</td><td>Name of the format whose images will be removed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a05ffc1b5bcc88ae33e9a914a17b2eaf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) retrieveImageForEntity: </td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_h_n_k_cache_entity-p.html">HNKCacheEntity</a>&gt;)&#160;</td>
          <td class="paramname"><em>entity</em></td>
        </tr>
        <tr>
          <td class="paramkey">formatName:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>formatName</em></td>
        </tr>
        <tr>
          <td class="paramkey">completionBlock:</td>
          <td></td>
          <td class="paramtype">(void(^)(UIImage *image, NSError *error))&#160;</td>
          <td class="paramname"><em>completionBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves an image from the cache, or creates one if it doesn't exist. If the image exists in the memory cache, the completion block will be executed synchronously. If the image has to be retreived from the disk cache or has to be created, the completion block will be executed asynchronously. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity</td><td>Entity that represents the original image. If the image doesn't exist in the cache, the entity will be asked to provide the original data or image to create it. Any calls to the entity will be done in the main queue. </td></tr>
    <tr><td class="paramname">formatName</td><td>Name of the format in which the image is desired. The format must have been previously registered with the cache. If the image doesn't exist in the cache, it will be created based on the format. If by creating the image the format disk capacity is surpassed, least recently used images of the format will be removed until it isn't. </td></tr>
    <tr><td class="paramname">completionBlock</td><td>The block to be called with the requested image. Always called from the main queue. Will be called synchronously if the image exists in the memory cache, or asynchronously if the image has to be retreived from the disk cache or has to be created. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>YES if image exists in the memory cache (and thus, the completion block was called synchronously), NO otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b3f87e9d4189c0ec91b634b8f581296"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) retrieveImageForKey: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>key</em></td>
        </tr>
        <tr>
          <td class="paramkey">formatName:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>formatName</em></td>
        </tr>
        <tr>
          <td class="paramkey">completionBlock:</td>
          <td></td>
          <td class="paramtype">(void(^)(UIImage *image, NSError *error))&#160;</td>
          <td class="paramname"><em>completionBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves an image from the cache. If the image exists in the memory cache, the completion block will be executed synchronously. If the image has to be retreived from the disk cache, the completion block will be executed asynchronously. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Image cache key. </td></tr>
    <tr><td class="paramname">formatName</td><td>Name of the format in which the image is desired. The format must have been previously registered with the cache. </td></tr>
    <tr><td class="paramname">completionBlock</td><td>Block to be called with the requested image. Always called from the main queue. Will be called synchronously if the image exists in the memory cache, or asynchronously if the image exists in the disk cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>YES if image exists in the memory cache (and thus, the completion block was called synchronously), NO otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="acf8eec52df76d3baddbb5db9d14ea130"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setImage: </td>
          <td></td>
          <td class="paramtype">(UIImage*)&#160;</td>
          <td class="paramname"><em>image</em></td>
        </tr>
        <tr>
          <td class="paramkey">forKey:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>key</em></td>
        </tr>
        <tr>
          <td class="paramkey">formatName:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>formatName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the image of the given key for the given format. The image is added to the memory cache and the disk cache if the format allows it. </p><dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>Image to add to the cache. Can be nil, in which case the current image associated to the given key and format will be removed. </td></tr>
    <tr><td class="paramname">key</td><td>Image cache key. </td></tr>
    <tr><td class="paramname">formatName</td><td>Name of the format of the given image.  You can use this method to pre-populate the cache, invalidate a specific image or to add resized images obtained elsewhere (e.g., a web service that generates thumbnails). In other cases, it's best to let the cache create the resized images. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>警告</dt><dd>The image size should match the format. This method won't validate this. </dd></dl>

</div>
</div>
<a class="anchor" id="a751b4c06b72430a498db248c201c4451"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interface_h_n_k_cache.html">HNKCache</a> *) sharedCache </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the shared cache. For simple apps that don't require multiple caches. </p>

</div>
</div>
<h2 class="groupheader">プロパティ詳解</h2>
<a class="anchor" id="a26177b583cb0fbc469732f304304ae63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (NSDictionary *) formats</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Dictionary of formats registered with the cache. </p>

</div>
</div>
<hr/>このクラス詳解は次のファイルから抽出されました:<ul>
<li>FrameworkManager/sample/packages/ProjectPackage/iOSSample/Libraries/Haneke/<a class="el" href="_h_n_k_cache_8h_source.html">HNKCache.h</a></li>
<li>FrameworkManager/sample/packages/ProjectPackage/iOSSample/Libraries/Haneke/HNKCache.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
2015年07月21日(火) 17時04分05秒作成 - UNICORN - iOS / 構成:  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
