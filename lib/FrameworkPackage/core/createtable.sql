-- MySQL --
-- session --
CREATE TABLE IF NOT EXISTS `app_session` (`token` VARCHAR(255) NOT NULL COMMENT 'ワンタイムトークン', `created` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'トークン作成日時', PRIMARY KEY(`token`)) ENGINE = MYISAM;
CREATE TABLE IF NOT EXISTS `app_session_data` (`identifier` CHAR(96) NOT NULL COMMENT 'deviceテーブルのPkey', `data` TEXT DEFAULT NULL COMMENT 'jsonシリアライズされたセッションデータ', `modified` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '変更日時', PRIMARY KEY(`identifier`)) ENGINE = MYISAM;
-- user --
CREATE TABLE IF NOT EXISTS `device` (`udid` CHAR(36) NOT NULL COMMENT 'udid(pkey)', `owner_id` int(10) NOT NULL DEFAULT 0 COMMENT 'userテーブルのPkey(オーナーユーザー)', `type` VARCHAR(10) NOT NULL DEFAULT 'PC' COMMENT 'デバイスタイプ(PC,iPhone,Android...)', `device_token` CHAR(32) DEFAULT NULL COMMENT 'デバイストークン', `created` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '作成日時', `modified` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '更新日時', `available` CHAR(1) NOT NULL DEFAULT '1' COMMENT 'レコード有効状態(0:無効 1:有効)', PRIMARY KEY(`udid`));
CREATE TABLE IF NOT EXISTS `user` (`id` int(10) NOT NULL AUTO_INCREMENT COMMENT 'pkey', `name` VARCHAR(128) DEFAULT NULL COMMENT 'ユーザー名称(ユーザー名)', `uniq_name` VARCHAR(128) DEFAULT NULL COMMENT 'user名(ユーザーID)', `created` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '作成日時', `modified` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '更新日時', `available` CHAR(1) NOT NULL DEFAULT '1' COMMENT 'レコード有効状態(0:無効 1:有効)', PRIMARY KEY(`id`));
CREATE TABLE IF NOT EXISTS `sample` (`id` int(10) NOT NULL AUTO_INCREMENT COMMENT 'pkey', `name` VARCHAR(128) DEFAULT NULL COMMENT 'レコード名', `owner_id` int(10) NOT NULL COMMENT 'userテーブルのPkey(オーナーユーザー)', `created` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '作成日時', `modified` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '更新日時', `available` CHAR(1) NOT NULL DEFAULT '1' COMMENT 'レコード有効状態(0:無効 1:有効)', PRIMARY KEY(`id`));
